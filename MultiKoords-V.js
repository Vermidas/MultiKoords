// ==UserScript==
// @name       MultiSelectVillages
// @version    2.0
// @autor    Sakrileg (Überarbeitung)
// @description
// @include    https://de*.die-staemme.de/game.php*screen=map*
// ==/UserScript==
const _0x239750=_0x4392;function _0x4392(_0x3b71e6,_0x3f2b73){const _0x31ee3b=_0x31ee();return _0x4392=function(_0x43920f,_0x320d7b){_0x43920f=_0x43920f-0x162;let _0x4f4115=_0x31ee3b[_0x43920f];return _0x4f4115;},_0x4392(_0x3b71e6,_0x3f2b73);}function _0x31ee(){const _0x209b86=['Gruppen-Name','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','join','#koordspick','onClick','Löschen','getOwnPropertySymbols','</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','parentElement','add','groups','after','2678586DFpPYE','\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22btn\x20btn-default\x22>','__spawnSector','__onClick','\x22\x20value=\x22','selectedGroup','nextSibling','villages','handler','stringify','#content_value\x20h2:first','1197354oJQGwa','parse','mapHandler','getOwnPropertyDescriptor','5nNEkqO','2815320TlNXpH','click','form','1751636YpAFIW','.selectButton','filter','removeEventListener','groupName','boxSizing','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','forEach','addEventListener','Speichern','div','All','btn\x20btn-default','className','Selektieren','getItem','log','preventDefault','\x22\x20required\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20required\x20placeholder=\x22','createElement','color','name','Exportierte\x20Dörfer','map','#ffffff','querySelector','keys','33201UYhYFX','Starte\x20Koordinaten-Selektor','startCoordsPicker','#content_value\x20>\x20h2','170fkBvuK','border-box','68218iMmjDQ','Exportieren','innerHTML','concat','stopCoordsPicker','show','style','export','Hinzufügen','button','transparent','<button\x20id=\x22koordspick\x22\x20class=\x22btn\x20btn-default\x22>Koords</button>','Map\x20Coords\x20Picker','appendChild','2938809rdmUZJ','delete','remove','de_DE','none','border','exportVillagesButton','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20value=\x22','some','5px\x20solid\x20','marginLeft','</button>','7LTPgrz','<button\x20type=\x22button\x22\x20class=\x22btn\x20btn-default\x22>','#exportVillagesButton','started','function','push',')</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20cols=30\x20rows=8\x20readonly>','\x20Dörfer','key','target','setItem','exportedVillages','#map_village_','button[type=\x22button\x22]','defineProperty','insertBefore','kichiyaki_map_coords_picker','value'];_0x31ee=function(){return _0x209b86;};return _0x31ee();}(function(_0x185e5e,_0x1970d4){const _0x31d85b=_0x4392,_0x499fd8=_0x185e5e();while(!![]){try{const _0x461822=parseInt(_0x31d85b(0x1aa))/0x1+parseInt(_0x31d85b(0x181))/0x2+-parseInt(_0x31d85b(0x1b8))/0x3+parseInt(_0x31d85b(0x189))/0x4+-parseInt(_0x31d85b(0x185))/0x5*(-parseInt(_0x31d85b(0x176))/0x6)+parseInt(_0x31d85b(0x1c5))/0x7*(parseInt(_0x31d85b(0x186))/0x8)+-parseInt(_0x31d85b(0x1a4))/0x9*(parseInt(_0x31d85b(0x1a8))/0xa);if(_0x461822===_0x1970d4)break;else _0x499fd8['push'](_0x499fd8['shift']());}catch(_0xc74033){_0x499fd8['push'](_0x499fd8['shift']());}}}(_0x31ee,0xd22a2),$(_0x239750(0x180))[_0x239750(0x175)](_0x239750(0x1b5)),$(_0x239750(0x16d))[_0x239750(0x187)](()=>{(function(){const _0x5aac89=_0x4392;function _0x48e85a(_0x25162b,_0x381870,_0xc6a4b5){const _0x5044bf=_0x4392;if(_0x381870 in _0x25162b)Object[_0x5044bf(0x166)](_0x25162b,_0x381870,{'value':_0xc6a4b5,'enumerable':!![],'configurable':!![],'writable':!![]});else _0x25162b[_0x381870]=_0xc6a4b5;return _0x25162b;}function _0x48946d(_0x27e4b2){const _0x17add4=_0x4392;for(var _0x13baa3=0x1;_0x13baa3<arguments[_0x17add4(0x1bf)];_0x13baa3++){var _0x5cac0a=arguments[_0x13baa3]!=null?arguments[_0x13baa3]:{},_0xd6a48a=Object[_0x17add4(0x1a3)](_0x5cac0a);if(typeof Object[_0x17add4(0x170)]===_0x17add4(0x1c9))_0xd6a48a=_0xd6a48a[_0x17add4(0x1ad)](Object[_0x17add4(0x170)](_0x5cac0a)[_0x17add4(0x18b)](function(_0x21cc33){const _0x1eb70a=_0x17add4;return Object[_0x1eb70a(0x184)](_0x5cac0a,_0x21cc33)['enumerable'];}));_0xd6a48a[_0x17add4(0x190)](function(_0x2dec40){_0x48e85a(_0x27e4b2,_0x2dec40,_0x5cac0a[_0x2dec40]);});}return _0x27e4b2;}const _0x48dd8a={'de_DE':{'startCoordsPicker':_0x5aac89(0x1a5),'stopCoordsPicker':'Stoppe\x20Koordinaten-Selektor','exportedVillages':_0x5aac89(0x19f),'cannotDeleteSelectedGroup':'Gruppe\x20kann\x20nicht\x20gelöscht\x20werden!','select':_0x5aac89(0x197),'delete':_0x5aac89(0x16f),'add':_0x5aac89(0x1b2),'save':_0x5aac89(0x192),'groupName':_0x5aac89(0x16a),'export':_0x5aac89(0x1ab)}};var _0x42441a=()=>_0x48dd8a[_0x5aac89(0x1bb)];const _0x33058b=(_0x58906c,_0x4eaae0={})=>{const _0x5885e5=_0x5aac89,_0x1c3acc=localStorage[_0x5885e5(0x198)](_0x58906c);let _0x5ce027=_0x4eaae0;if(_0x1c3acc)_0x5ce027=JSON[_0x5885e5(0x182)](_0x1c3acc);return _0x5ce027;},_0x158e20=(_0x74a5d6,_0x3c1008)=>{const _0x24a879=_0x5aac89;localStorage[_0x24a879(0x162)](_0x74a5d6,JSON[_0x24a879(0x17f)](_0x3c1008));},_0x109a4f=_0x5aac89(0x168),_0x57f95e=document[_0x5aac89(0x1a2)](_0x5aac89(0x1a7));let _0x8868d3,_0x4780e4,_0xdceb12,_0x208199=_0x33058b(_0x109a4f,{'started':![],'groups':{'All':{'villages':[],'color':_0x5aac89(0x1a1)}},'selectedGroup':_0x5aac89(0x194)}),_0x4b57e8;const _0x1fd619=_0x42441a(),_0x43ae6a=()=>{_0x158e20(_0x109a4f,_0x208199);},_0x4448f2=(_0x183477,_0x220814)=>{const _0x5bff03=_0x5aac89,_0x3d9bd8=parseInt(''+_0x183477+_0x220814,0xa),_0x2d4e53=TWMap[_0x5bff03(0x17d)][_0x3d9bd8];if(!_0x2d4e53)return NaN;return _0x2d4e53['id'];},_0x320651=(_0x18a82f,_0xee6d11,_0x4cde53=_0x5aac89(0x1b4))=>{const _0x3afdd7=_0x5aac89,_0x2829f9=document[_0x3afdd7(0x1a2)](_0x3afdd7(0x164)+_0x4448f2(_0x18a82f,_0xee6d11));_0x2829f9&&(_0x2829f9['style'][_0x3afdd7(0x18e)]=_0x3afdd7(0x1a9),_0x2829f9[_0x3afdd7(0x1b0)][_0x3afdd7(0x1bd)]=_0x4cde53!==_0x3afdd7(0x1b4)?_0x3afdd7(0x1c2)+_0x4cde53:_0x3afdd7(0x1bc));},_0x50bb5a=(_0x288187,_0x59582d='')=>{const _0x5d4329=_0x5aac89;_0x208199[_0x5d4329(0x174)][_0x288187]['villages'][_0x5d4329(0x190)](_0x4216ce=>{const _0x1db8a0=_0x5d4329;_0x320651(_0x4216ce['x'],_0x4216ce['y'],_0x59582d?_0x59582d:_0x208199[_0x1db8a0(0x174)][_0x288187][_0x1db8a0(0x19d)]);});},_0x29ec64=(_0x419f6a='')=>{for(let _0x24a468 in _0x208199['groups'])_0x50bb5a(_0x24a468,_0x419f6a);},_0x1bf610=_0x89716d=>{const _0x2d9e84=_0x5aac89;for(let _0x25edf3 in _0x208199[_0x2d9e84(0x174)]){if(_0x25edf3===_0x208199[_0x2d9e84(0x17b)])return;_0x208199[_0x2d9e84(0x174)][_0x25edf3][_0x2d9e84(0x17d)]=_0x208199[_0x2d9e84(0x174)][_0x25edf3][_0x2d9e84(0x17d)][_0x2d9e84(0x18b)](_0x71e7d1=>_0x71e7d1[_0x2d9e84(0x1cd)]!==_0x89716d);}},_0x2774f6=(_0x36a87f,_0x37ce60,_0x5d0684)=>{const _0x508e39=_0x5aac89;_0x5d0684[_0x508e39(0x19a)]();if(isNaN(_0x4448f2(_0x36a87f,_0x37ce60)))return;const _0x3de5b1=_0x36a87f+'|'+_0x37ce60;if(_0x208199[_0x508e39(0x174)][_0x208199['selectedGroup']][_0x508e39(0x17d)][_0x508e39(0x1c1)](_0x28da2b=>_0x28da2b['key']===_0x3de5b1)){_0x208199[_0x508e39(0x174)][_0x208199[_0x508e39(0x17b)]][_0x508e39(0x17d)]=_0x208199[_0x508e39(0x174)][_0x208199[_0x508e39(0x17b)]][_0x508e39(0x17d)]['filter'](_0x4a1c0c=>_0x4a1c0c[_0x508e39(0x1cd)]!==_0x3de5b1),_0x320651(_0x36a87f,_0x37ce60,'transparent');return;}_0x208199['groups'][_0x208199[_0x508e39(0x17b)]][_0x508e39(0x17d)]=[..._0x208199['groups'][_0x208199[_0x508e39(0x17b)]]['villages'],{'x':_0x36a87f,'y':_0x37ce60,'key':_0x3de5b1}],_0x320651(_0x36a87f,_0x37ce60,_0x208199['groups'][_0x208199[_0x508e39(0x17b)]][_0x508e39(0x19d)]),_0x1bf610(_0x3de5b1),_0x43ae6a();},_0x2233d1=(_0x163c83,_0x33abac)=>{const _0x328ca6=_0x5aac89,_0x239781=_0x33abac&&_0x33abac[_0x328ca6(0x19e)]!==_0x208199['selectedGroup'],_0x583584=_0x328ca6(0x1c0)+(_0x33abac?_0x33abac['color']:'')+_0x328ca6(0x19b)+_0x1fd619[_0x328ca6(0x18d)]+_0x328ca6(0x17a)+(_0x33abac?_0x33abac[_0x328ca6(0x19e)]:'')+_0x328ca6(0x177)+(_0x33abac?_0x1fd619['save']:_0x1fd619[_0x328ca6(0x173)])+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x33abac?_0x328ca6(0x1c6)+_0x1fd619[_0x328ca6(0x1b9)]+_0x328ca6(0x1c4):'')+_0x328ca6(0x16b)+(_0x239781?'<button\x20class=\x22btn\x20btn-default\x20selectButton\x22\x20type=\x22button\x22>'+_0x1fd619['select']+_0x328ca6(0x1c4):'')+_0x328ca6(0x18f),_0x18eb65=document[_0x328ca6(0x19c)](_0x328ca6(0x188));_0x18eb65[_0x328ca6(0x1ac)]=_0x583584,_0x18eb65[_0x328ca6(0x191)]('submit',_0x426b17=>{const _0x5cc4ad=_0x328ca6;_0x426b17[_0x5cc4ad(0x19a)]();if(_0x33abac){if(_0x33abac['name']===_0x208199[_0x5cc4ad(0x17b)])_0x208199[_0x5cc4ad(0x17b)]=_0x426b17[_0x5cc4ad(0x1ce)][0x1]['value'];_0x50bb5a(_0x33abac[_0x5cc4ad(0x19e)],_0x426b17[_0x5cc4ad(0x1ce)][0x0][_0x5cc4ad(0x169)]),_0x208199[_0x5cc4ad(0x174)][_0x426b17[_0x5cc4ad(0x1ce)][0x1][_0x5cc4ad(0x169)]]=_0x48946d({},_0x208199[_0x5cc4ad(0x174)][_0x33abac['name']],{'color':_0x426b17[_0x5cc4ad(0x1ce)][0x0]['value']});if(_0x33abac['name']!==_0x426b17[_0x5cc4ad(0x1ce)][0x1][_0x5cc4ad(0x169)])delete _0x208199[_0x5cc4ad(0x174)][_0x33abac[_0x5cc4ad(0x19e)]];}else _0x208199['groups'][_0x426b17['target'][0x1][_0x5cc4ad(0x169)]]={'color':_0x426b17[_0x5cc4ad(0x1ce)][0x0]['value'],'villages':[]};_0x28fd8f();});if(_0x33abac){_0x18eb65[_0x328ca6(0x1a2)](_0x328ca6(0x165))[_0x328ca6(0x191)]('click',()=>{const _0x3684d7=_0x328ca6;_0x50bb5a(_0x33abac[_0x3684d7(0x19e)],_0x3684d7(0x1b4)),delete _0x208199[_0x3684d7(0x174)][_0x33abac[_0x3684d7(0x19e)]],_0x18eb65[_0x3684d7(0x1ba)](),_0x43ae6a();});const _0x2d7b55=_0x18eb65[_0x328ca6(0x1a2)](_0x328ca6(0x18a));if(_0x2d7b55)_0x2d7b55['addEventListener']('click',_0x16b138=>{const _0x4e97a0=_0x328ca6;_0x208199[_0x4e97a0(0x17b)]=_0x33abac[_0x4e97a0(0x19e)],_0x28fd8f();});}_0x163c83['appendChild'](_0x18eb65);},_0x28fd8f=()=>{const _0x19db49=_0x5aac89;_0x4780e4[_0x19db49(0x1ac)]='';for(let _0xbcc16d in _0x208199['groups'])_0x2233d1(_0x4780e4,_0x48946d({},_0x208199[_0x19db49(0x174)][_0xbcc16d],{'name':_0xbcc16d}));_0x2233d1(_0x4780e4);},_0x448deb=()=>{const _0x5d2549=_0x5aac89,_0x511c5b=[];for(let _0x196772 in _0x208199['groups']){const _0x46d923=_0x208199[_0x5d2549(0x174)][_0x196772][_0x5d2549(0x17d)][_0x5d2549(0x1bf)];_0x511c5b[_0x5d2549(0x1ca)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:\x2030px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>'+_0x196772+'\x20('+_0x46d923+_0x5d2549(0x1cc)+(_0x46d923!==0x1?'':'')+_0x5d2549(0x1cb)+_0x208199[_0x5d2549(0x174)][_0x196772][_0x5d2549(0x17d)]['map'](_0x1c96a2=>_0x1c96a2[_0x5d2549(0x1cd)])[_0x5d2549(0x16c)]('\x20')['trim']()+_0x5d2549(0x171));}const _0x19821f=''+_0x511c5b['join']('');Dialog[_0x5d2549(0x1af)](_0x1fd619[_0x5d2549(0x163)],_0x19821f);},_0x4480d8=()=>{const _0x28120e=_0x5aac89,_0x105c5a=document[_0x28120e(0x19c)](_0x28120e(0x1b3));_0x105c5a[_0x28120e(0x196)]='btn\x20btn-default',_0x105c5a[_0x28120e(0x1ac)]=_0x1fd619[_0x28120e(0x1b1)],_0x105c5a[_0x28120e(0x191)](_0x28120e(0x187),_0x448deb),_0xdceb12[_0x28120e(0x1b7)](_0x105c5a);},_0x1d45ad=(_0x4326fe,_0x490f94)=>{const _0x50b34e=_0x5aac89;TWMap['mapHandler'][_0x50b34e(0x178)](_0x4326fe,_0x490f94),_0x29ec64();};let _0x4ebf04=null;const _0x291b66=()=>{const _0x441101=_0x5aac89;_0x4ebf04&&_0x4ebf04[_0x441101(0x191)](_0x441101(0x187),_0x448deb);},_0x3214f4=()=>{const _0x177c66=_0x5aac89;_0x208199=_0x33058b(_0x109a4f,_0x208199);const _0x214af3=document[_0x177c66(0x1a2)](_0x177c66(0x1c7));_0x214af3&&(_0x214af3[_0x177c66(0x18c)](_0x177c66(0x187),_0x448deb),_0x214af3['parentNode']['removeChild'](_0x214af3));TWMap['map'][_0x177c66(0x17e)]['__onClick']=TWMap['map'][_0x177c66(0x17e)][_0x177c66(0x16e)],TWMap[_0x177c66(0x1a0)]['handler']['onClick']=_0x2774f6,TWMap[_0x177c66(0x183)][_0x177c66(0x178)]=TWMap['map'][_0x177c66(0x17e)]['spawnSector'],TWMap[_0x177c66(0x183)]['spawnSector']=_0x1d45ad,_0x8868d3[_0x177c66(0x1ac)]=_0x1fd619['stopCoordsPicker'],_0x4480d8(),_0x29ec64();for(let _0x275339 in _0x208199[_0x177c66(0x174)]){_0x50bb5a(_0x275339,_0x208199[_0x177c66(0x174)][_0x275339][_0x177c66(0x19d)]);}_0x28fd8f(),_0x214af3&&(_0x214af3[_0x177c66(0x18c)](_0x177c66(0x187),_0x448deb),_0x214af3=null),_0x214af3=document[_0x177c66(0x19c)](_0x177c66(0x1b3)),_0x214af3['id']=_0x177c66(0x1be),_0x214af3['className']=_0x177c66(0x195),_0x214af3[_0x177c66(0x1ac)]=_0x1fd619[_0x177c66(0x1b1)],_0xdceb12['appendChild'](_0x214af3),_0x291b66();},_0x107247=()=>{const _0x258ba4=_0x5aac89;if(typeof TWMap['map'][_0x258ba4(0x17e)]['__onClick']===_0x258ba4(0x1c9))TWMap[_0x258ba4(0x1a0)][_0x258ba4(0x17e)][_0x258ba4(0x16e)]=TWMap[_0x258ba4(0x1a0)]['handler'][_0x258ba4(0x179)];if(typeof TWMap['map'][_0x258ba4(0x17e)][_0x258ba4(0x178)]==='function')TWMap[_0x258ba4(0x183)]['spawnSector']=TWMap['map']['handler'][_0x258ba4(0x178)];_0x8868d3[_0x258ba4(0x1ac)]=_0x1fd619[_0x258ba4(0x1a6)],_0x4780e4[_0x258ba4(0x1ac)]='',_0xdceb12['innerHTML']='',_0x29ec64(_0x258ba4(0x1b4));if(_0x4b57e8)clearInterval(_0x4b57e8);for(let _0x134704 in _0x208199[_0x258ba4(0x174)])_0x208199[_0x258ba4(0x174)][_0x134704][_0x258ba4(0x17d)]=[];},_0x39ab1f=()=>{const _0x15391d=_0x5aac89;if(_0x208199[_0x15391d(0x1c8)])_0x107247();else _0x3214f4();_0x208199['started']=!_0x208199['started'];},_0xad08da=()=>{const _0x43ce3b=_0x5aac89;_0x8868d3=document[_0x43ce3b(0x19c)](_0x43ce3b(0x1b3)),_0x8868d3[_0x43ce3b(0x196)]=_0x43ce3b(0x195),_0x8868d3[_0x43ce3b(0x1b0)][_0x43ce3b(0x1c3)]='5px',_0x8868d3['innerHTML']=_0x208199['started']?_0x1fd619[_0x43ce3b(0x1ae)]:_0x1fd619[_0x43ce3b(0x1a6)],_0x8868d3[_0x43ce3b(0x191)](_0x43ce3b(0x187),_0x39ab1f),_0x57f95e[_0x43ce3b(0x1b7)](_0x8868d3),_0x4780e4=document[_0x43ce3b(0x19c)](_0x43ce3b(0x193)),_0x57f95e[_0x43ce3b(0x172)][_0x43ce3b(0x167)](_0x4780e4,_0x57f95e['nextSibling']),_0xdceb12=document[_0x43ce3b(0x19c)](_0x43ce3b(0x193)),_0x57f95e[_0x43ce3b(0x172)]['insertBefore'](_0xdceb12,_0x57f95e[_0x43ce3b(0x17c)]);if(_0x208199[_0x43ce3b(0x1c8)])_0x3214f4();};(function(){const _0x3b1e6=_0x5aac89;try{_0xad08da();}catch(_0x3c91f2){console[_0x3b1e6(0x199)](_0x3b1e6(0x1b6),_0x3c91f2);}}());}());}));
